"use strict";(self.webpackChunkulbi_my_project=self.webpackChunkulbi_my_project||[]).push([[502],{5408:(e,n,r)=>{r.d(n,{p:()=>l});var t=r(4848),a=r(7950),o=r(6540);var i=function(){return i=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},i.apply(this,arguments)},l=(0,o.memo)(function(e){var n=e.className,r=e.value,o=e.onChange,l=e.type,s=void 0===l?"text":l,u=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]])}return r}(e,["className","value","onChange","type"]);return(0,t.jsx)("div",i({className:(0,a.x)("yiPASP1v",{},[n])},{children:(0,t.jsx)("input",i({className:"LVdIPwcx",type:s,value:r,onChange:function(e){null==o||o(e.target.value)}},u))}))})},6502:(e,n,r)=>{r.r(n),r.d(n,{default:()=>R});var t=r(4848),a=r(6540),o=r(7950),i=r(6142),l=r(2376),s=r(5408),u=r(9966);const c={title:"ikI7VPeL",text:"uNJeeCm1",error:"F9oLXAK4"};var d,f=function(){return f=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},f.apply(this,arguments)};!function(e){e.PRIMARY="primary",e.ERROR="error"}(d||(d={}));var p=function(e){var n,r=e.className,a=e.text,i=e.theme,l=void 0===i?d.PRIMARY:i,s=e.title;return(0,t.jsxs)("div",f({className:(0,o.x)(c.Text,(n={},n[c[l]]=!0,n),[r])},{children:[s&&(0,t.jsx)("p",f({className:c.title},{children:s})),a&&(0,t.jsx)("p",f({className:c.text},{children:a}))]}))},v=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.username)||""},h=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.password)||""},m=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.isLoading)||!1},y=function(e){var n;return null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.error},g=r(2505),b=r.n(g),x=r(493),w=r(3889),j=r(9078),O=(0,x.zD)("login/loginByUsername",function(e,n){return r=void 0,t=void 0,o=function(){var r,t;return function(e,n){var r,t,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,t&&(a=2&l[0]?t.return:l[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,l[1])).done)return a;switch(t=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,t=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e],t=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,b().post("http://localhost:8000/login",e)];case 1:if(!(r=a.sent()).data)throw new Error;return localStorage.setItem(j.P,JSON.stringify(r.data)),n.dispatch(w.Xp.setAuthData(r.data)),[2,r.data];case 2:return t=a.sent(),console.warn(t),[2,n.rejectWithValue("Error")];case 3:return[2]}})},new((a=void 0)||(a=Promise))(function(e,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(n){var r;n.done?e(n.value):(r=n.value,r instanceof a?r:new a(function(e){e(r)})).then(i,l)}s((o=o.apply(r,t||[])).next())});var r,t,a,o}),N=(0,x.Z0)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUserName:function(e,n){e.username=n.payload},setPassword:function(e,n){e.password=n.payload}},extraReducers:function(e){e.addCase(O.pending,function(e){e.error=void 0,e.isLoading=!0}).addCase(O.fulfilled,function(e){e.isLoading=!0}).addCase(O.rejected,function(e,n){e.isLoading=!1,e.error=n.payload})}}),P=N.actions,C=N.reducer;var k=function(){return k=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},k.apply(this,arguments)};const R=(0,a.memo)(function(e){var n=e.className,r=(0,i.B)().t,c=(0,u.wA)(),f=(0,u.d4)(v),g=(0,u.d4)(h),b=(0,u.d4)(m),x=(0,u.d4)(y),w=(0,u.Pj)(),j=(0,a.useCallback)(function(e){c(P.setUserName(e))},[c]),N=(0,a.useCallback)(function(e){c(P.setPassword(e))},[c]),R=(0,a.useCallback)(function(){c(O({username:f,password:g}))},[c,f,g]);return(0,a.useEffect)(function(){return w.reducerManager.add("loginForm",C),c({type:"@Init login form reducer"}),function(){w.reducerManager.remove("loginForm")}},[]),(0,t.jsxs)("div",k({className:(0,o.x)("xYNEfcE9",{},[n])},{children:[(0,t.jsx)(p,{title:r("Форма авторизации")}),x&&(0,t.jsx)(p,{text:r("Неверный логин или пароль"),theme:d.ERROR}),(0,t.jsx)(s.p,{value:f,placeholder:r("Введите имя"),onChange:j}),(0,t.jsx)(s.p,{value:g,placeholder:r("Введите пароль"),onChange:N}),(0,t.jsx)(l.$n,k({className:"Ok_5amJo",theme:l.Ox.OUTLINE,disabled:b,onClick:R},{children:r("Войти")}))]}))})}}]);